$(function(){function checkInfo(){var tag=0,username=$($infoList).find("li.info-name input").val(),qqNumber=$($infoList).find("li.info-qq input").val(),telNumber=$($infoList).find("li.info-tel input").val(),authcode=$($infoList).find("li.info-code input").val(),recTel=$($infoList).find("li.info-rectel input").val();checkChName(username)?$($infoList).find("li.info-name .info-tips").css("display","none"):($($infoList).find("li.info-name .info-tips").css("display","block"),tag=1),checkQQNumber(qqNumber)?$($infoList).find("li.info-qq .info-tips").css("display","none"):($($infoList).find("li.info-qq .info-tips").css("display","block"),tag=1),checkTelNumber(telNumber)?$($infoList).find("li.info-tel .info-tips").css("display","none"):($($infoList).find("li.info-tel .info-tips").css("display","block"),tag=1),checkCode(authcode)?$($infoList).find("li.info-code .info-tips").css("display","none"):($($infoList).find("li.info-code .info-tips").css("display","block"),tag=1),""==recTel||checkTelNumber(recTel)?""!=recTel&&recTel==telNumber?($($infoList).find("li.info-rectel .info-tips").html("填写本人电话无效"),$($infoList).find("li.info-rectel .info-tips").css("display","block"),tag=1):$($infoList).find("li.info-rectel .info-tips").css("display","none"):($($infoList).find("li.info-rectel .info-tips").html("手机号码不正确"),$($infoList).find("li.info-rectel .info-tips").css("display","block"),tag=1),tag||$.ajax({type:"get",dataType:"jsonp",url:"http://wx.supin.58.com/spactivity/saveWorkmate",data:{username:username,qq:qqNumber,mobile:telNumber,authcode:authcode,referrerMobile:recTel},error:function(){},success:function(data){data.isSuccess?submitInfo(data):alert(data.returnMessage)}})}function submitInfo(data){return data.isSuccess?(document.documentElement.scrollTop=0,document.body.scrollTop=0,0==data.entity.exist?$("#bmSucc").show():1==data.entity.exist&&$("#twSucc").show(),$("#blackmask").show(),void(isSroll=1)):void 0}function validate(){var tel=$($infoList).find("li.info-tel input").val();return""!=tel&&checkTelNumber(tel)?void $.ajax({type:"get",dataType:"jsonp",url:"http://wx.supin.58.com/spactivity/authcode",data:{mobile:tel},error:function(){},success:function(data){data.isSuccess?(countDown($("#validate")),$($infoList).find("li.info-tel .info-tips").css("display","none")):alert(data.returnMessage)}}):void $($infoList).find("li.info-tel .info-tips").css("display","block")}function countDown(o){0==wait?($("#validate").on("click",validate),$("#validate").removeClass("yz-btn-disable").addClass("yz-btn"),o.html("验证"),wait=300):($("#validate").off("click",validate),$("#validate").removeClass("yz-btn").addClass("yz-btn-disable"),o.html(wait+"秒"),wait--,setTimeout(function(){countDown(o)},1e3))}function checkTelNumber(tel){var re=/(^1\d{10}$)/g;return re.test(tel)}function checkQQNumber(qq){var re=/^\d\d{0,9}\d$/g;return re.test(qq)}function checkChName(name){var re=/^[\u4E00-\u9fa5][\u4E00-\u9fa5]{0,2}[\u4E00-\u9fa5]$/g;return re.test(name)}function checkCode(code){var re=/([a-z]|[A-Z]|[0-9]){6}/g;return re.test(code)}function isWeiXin(){var ua=window.navigator.userAgent.toLowerCase();return"micromessenger"==ua.match(/MicroMessenger/i)?!0:!1}var setRem=function(){var clientWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,fontSize=30,nowRem=clientWidth*fontSize/640;$("html").css("font-size",nowRem+"px")};onresize=setRem,setRem(),$("#blackmask").css("width",$(window).width()),$("#blackmask").css("height",$(window).height()+$(window).height()),$(".popwrap").on("click",".pop-close",function(){$(this).parents(".popwrap").css("display","none"),$("#blackmask").css("display","none"),isSroll=0}),$("#validate").on("click",validate),$("#submit").on("click",function(){checkInfo()}),$("#yaoqing").on("click",function(){isWeiXin()&&($("#blackmask").css("display","block"),isSroll=1)}),$("#blackmask").on("click",function(){$(this).hide(),$(".popwrap").hide(),isSroll=0}),isWeiXin()||$(".share-icon").css("visibility","hidden");var $infoList=$("#info-content"),wait=300,isSroll=0;document.addEventListener("touchmove",function(event){isSroll&&event.preventDefault()}),function(){wx.config({debug:!1,appId:"",timestamp:(new Date).getTime(),nonceStr:"",signature:"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){var wxconfig={title:"速聘喊你来领5Q币!",desc:"牛×工友成长计划，喊你来领5Q币！",link:location.href,imgUrl:"http://c.58cdn.com.cn/crop/zt/sp/pugong/img/share_icon.jpg",success:function(){},cancel:function(){}};wx.onMenuShareTimeline(wxconfig),wx.onMenuShareAppMessage(wxconfig),wx.onMenuShareQQ(wxconfig),wx.onMenuShareWeibo(wxconfig),wx.onMenuShareQZone(wxconfig)})}()});